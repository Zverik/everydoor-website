
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Every Door Documentation">
      
      
      
        <link rel="canonical" href="https://every-door.app/docs/develop/cases/">
      
      
        <link rel="prev" href="../structure/">
      
      
        <link rel="next" href="../../plugins/">
      
      
      <link rel="icon" href="../../favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.20">
    
    
      
        <title>Finding Code - Every Door</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.e53b48f4.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#how-to-find-things" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Every Door" class="md-header__button md-logo" aria-label="Every Door" data-md-component="logo">
      
  <img src="../../favicon.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Every Door
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Finding Code
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../guide/" class="md-tabs__link">
          
  
  
    
  
  User Guide

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../" class="md-tabs__link">
          
  
  
    
  
  Contributor Guide

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../plugins/" class="md-tabs__link">
          
  
  
    
  
  Plugins

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Every Door" class="md-nav__button md-logo" aria-label="Every Door" data-md-component="logo">
      
  <img src="../../favicon.png" alt="logo">

    </a>
    Every Door
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_1" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../guide/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    User Guide
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_1" id="__nav_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            User Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/preface/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OpenStreetMap
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/quick_start/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Quick Start
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/faq/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    FAQ
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_1_5" >
        
          
          <label class="md-nav__link" for="__nav_1_5" id="__nav_1_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Releases
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_5">
            <span class="md-nav__icon md-icon"></span>
            Releases
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/releases/6.0/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    6.0
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/releases/7.0/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    7.0
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Contributor Guide
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Contributor Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../bugs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Reporting Bugs
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../translate/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Translating
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../presets/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Adding Presets
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../build/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Developing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../design/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Design Principles
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../structure/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Project Structure
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Finding Code
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Finding Code
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#editing-standard-fields" class="md-nav__link">
    <span class="md-ellipsis">
      Editing Standard Fields
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Editing Standard Fields">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#osmchange" class="md-nav__link">
    <span class="md-ellipsis">
      OsmChange
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#detecting-a-preset" class="md-nav__link">
    <span class="md-ellipsis">
      Detecting a Preset
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#localization" class="md-nav__link">
    <span class="md-ellipsis">
      Localization
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#querying-fields" class="md-nav__link">
    <span class="md-ellipsis">
      Querying Fields
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#built-in-fields" class="md-nav__link">
    <span class="md-ellipsis">
      Built-in Fields
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#postcode-and-opening-hours" class="md-nav__link">
    <span class="md-ellipsis">
      Postcode and Opening Hours
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#standard-fields" class="md-nav__link">
    <span class="md-ellipsis">
      Standard Fields
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sorting-fields" class="md-nav__link">
    <span class="md-ellipsis">
      Sorting Fields
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#zooming-out" class="md-nav__link">
    <span class="md-ellipsis">
      Zooming Out
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Zooming Out">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#map-controllers" class="md-nav__link">
    <span class="md-ellipsis">
      Map Controllers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modes-and-the-browser" class="md-nav__link">
    <span class="md-ellipsis">
      Modes and the Browser
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#interactivity" class="md-nav__link">
    <span class="md-ellipsis">
      Interactivity
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#uploading-to-openstreetmap" class="md-nav__link">
    <span class="md-ellipsis">
      Uploading to OpenStreetMap
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../plugins/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Plugins
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Plugins
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../plugins/install/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../plugins/metadata/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Writing a Plugin
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            Writing a Plugin
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../plugins/metadata/element_kinds/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Element Kinds
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../plugins/metadata/modes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Editor Modes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../plugins/metadata/presets/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Presets
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../plugins/metadata/imagery/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Imagery
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../plugins/code/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Programming
    
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            Programming
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../plugins/publish/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Publishing
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#editing-standard-fields" class="md-nav__link">
    <span class="md-ellipsis">
      Editing Standard Fields
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Editing Standard Fields">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#osmchange" class="md-nav__link">
    <span class="md-ellipsis">
      OsmChange
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#detecting-a-preset" class="md-nav__link">
    <span class="md-ellipsis">
      Detecting a Preset
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#localization" class="md-nav__link">
    <span class="md-ellipsis">
      Localization
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#querying-fields" class="md-nav__link">
    <span class="md-ellipsis">
      Querying Fields
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#built-in-fields" class="md-nav__link">
    <span class="md-ellipsis">
      Built-in Fields
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#postcode-and-opening-hours" class="md-nav__link">
    <span class="md-ellipsis">
      Postcode and Opening Hours
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#standard-fields" class="md-nav__link">
    <span class="md-ellipsis">
      Standard Fields
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sorting-fields" class="md-nav__link">
    <span class="md-ellipsis">
      Sorting Fields
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#zooming-out" class="md-nav__link">
    <span class="md-ellipsis">
      Zooming Out
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Zooming Out">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#map-controllers" class="md-nav__link">
    <span class="md-ellipsis">
      Map Controllers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modes-and-the-browser" class="md-nav__link">
    <span class="md-ellipsis">
      Modes and the Browser
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#interactivity" class="md-nav__link">
    <span class="md-ellipsis">
      Interactivity
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#uploading-to-openstreetmap" class="md-nav__link">
    <span class="md-ellipsis">
      Uploading to OpenStreetMap
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="how-to-find-things">How To Find Things</h1>
<p>The size of the code might be daunting (it is for me, the author), so this section
is intended to help with finding, where exactly to contribute when you want to change
something.</p>
<p>Note that the code is in a constant (but glacial) flux, so some of those might be
possible to change with a plugin in the future.</p>
<h2 id="editing-standard-fields">Editing Standard Fields</h2>
<p>As mentioned in the <a href="../../plugins/metadata/presets/">plugin docs</a>, "standard fields" is
a third group of fields that gets added on top of "fields" and "more fields" for every
object in the editor panel. This chapter traces its addition, marking what and where
can be improved.</p>
<h3 id="osmchange">OsmChange</h3>
<p>First we must mention that the single most important class in the app is
<a href="https://github.com/Zverik/every_door/blob/v6.0/lib/models/amenity.dart"><code>OsmChange</code></a>.
It defines a set of changes over the base <code>OsmElement</code> received from OpenStreetMap,
and a few methods to manipulate an object. For example, it acts as a <code>Map&lt;String, String&gt;</code>
for tags, but keeps the changes separate.</p>
<p>It can calculate an age based on the <code>check_date</code>
tag (but note that it's a bit inconsistent with the overridden values for the
<code>amenity</code> mode). There are methods to confirm an object (<code>check()</code>) and to toggle
its disused status. The one most important method that's used everywhere returns
full tags in a map: <code>getFullTags()</code>. It is of course cached.</p>
<h3 id="detecting-a-preset">Detecting a Preset</h3>
<p>Now, to learn whether we need to add and shuffle fields, we first need to detect
a preset. Let's look at <code>PoiEditorPage</code>'s state. In the <code>initState()</code>, the <code>amenity</code>
(the object we edit) is either copied or created anew, and
<a href="https://github.com/Zverik/every_door/blob/v6.0/lib/screens/editor.dart#L101"><code>updatePreset()</code></a>
is called. For an already existing object (or a newly created from an NSI preset),
we call <a href="https://github.com/Zverik/every_door/blob/v6.0/lib/providers/presets.dart#L231"><code>getPresetForTags()</code></a>
from a preset provider.</p>
<p>That method has got a lot of steps: checking for empty tags and <code>amenity=fixme</code> tags,
asks plugins for an answer. But the main step is running a huge SQL query against
the local SQLite database, which through clever CTE and sorting returns the one result.</p>
<p>Is it good to have a single big SQL query? Felt like a clever idea at the time, but
now I'm not so sure. But this method gets called dozens of times per second in the
micromapping mode, so this could be considered optimizing.</p>
<h3 id="localization">Localization</h3>
<p>All presets and fields are translated, so we pass the current <code>Locale</code> to preset
provider methods. The plugin subsystem too requires it — and that's basically it.
App localization is handled by the <a href="https://docs.flutter.dev/ui/accessibility-and-internationalization/internationalization">intl</a>
package.</p>
<p>Passing locales to SQL queries in the preset provider works relatively simple.
We <a href="https://github.com/Zverik/every_door/blob/v6.0/lib/providers/presets.dart#L92">create a CTE</a>
for a <code>langs</code> table that contains two columns, language
code and a rank, starting with 1. And we join the results with this table,
ordered by the language rank. Since window functions do not work in some
SQLite versions, we just query all the results and keep the first one for
each preset or field.</p>
<h3 id="querying-fields">Querying Fields</h3>
<p>After we have a preset, we call <a href="https://github.com/Zverik/every_door/blob/v6.0/lib/providers/presets.dart#L460"><code>getFields()</code></a>
Initially a preset is returned with empty fields, because its name and title
can be all we need (e.g. for the micromapping mode). But for the editor, we need
the fields. And we do another SQL query to the presets database,
querying the <code>fields</code> table with the list from the <code>preset_fields</code>.</p>
<p>Besides checking for a location, sorting languages, and sorting into two
lists ("fields" and "more fields", based on the <code>required</code> flag), it does two
more things.</p>
<p>First is building the combo options. While needed only for combo fields,
it is a very resource-intensive operation, since it conflates three sources:</p>
<ol>
<li>Options listed in the field definition.</li>
<li>Popular tag values from TagInfo.</li>
<li>Popular tag values from all the downloaded data.</li>
</ol>
<p>The result is stored in a database table, to not do this again. But still, it is
another database query, so make it four for cache misses.</p>
<p>That's why the <code>getFields()</code> method implements its own in-memory caching. You
can notice how long the first loading of the editor pane takes. That's because
in the collapsed "more fields" section there are dozens of combo fields.</p>
<p>Finally, the method calls the long <code>fieldFromJson</code> function from
<a href="https://github.com/Zverik/every_door/blob/main/lib/models/field.dart"><code>field.dart</code></a>.
It has some overrides for common keys, and for others, it uses the type.
It is pretty straightforward. When you're adding a field, do not forget
to create it <em>twice</em> in this file, in both functions.</p>
<h3 id="built-in-fields">Built-in Fields</h3>
<p>For some OSM keys (not preset names, and not field types) there are specific
classes instantiated in the <code>fieldFromJson()</code>. For example, <code>NamePresetField</code>
for a name, or a <code>WebsiteField</code> for a website. Those provide unique experience
in Every Door, often with shortcuts to edit tags faster, or set multiple tags
at once considering the context.</p>
<h3 id="postcode-and-opening-hours">Postcode and Opening Hours</h3>
<p>Note that field processing (this section, standard fields etc) happens only
when the object "<a href="https://github.com/Zverik/every_door/blob/v6.0/lib/screens/editor.dart#L93">needs address</a>".
Which means, it's either an amenity, a building, or an address point.</p>
<p>First thing, an opening hours field is added unconditionally. Things just tend
to have those.</p>
<p>Then, a postal code (zip code) field is added. It is partially a hack: the address
field in the default presets includes everything, but is not used. Instead, a custom
field is added in Every Door, but it
does not set a postcode (because it's a building property, not an amenity's).
But some mappers might need it. For buildings and address points it is added to the
main fields list, for other objects — to the additional list.</p>
<h3 id="standard-fields">Standard Fields</h3>
<p>An amenity is considered to need the full standard fields set when its preset mentions
both <code>opening_hours</code> and <code>phone</code> anywhere. Otherwise a shorter list of just two
fields is added, for an address and a floor.</p>
<p>You can find the list of fields in
<a href="https://github.com/Zverik/every_door/blob/v6.0/lib/providers/presets.dart#L612"><code>kStandardPoiFields</code></a>.
Note that it is constant, not dependent on anything. Each field is constructed
alike to the <code>getFields()</code> method: queried from the preset database, injected
with combo options, and cached. Plugins of course contribute to the results.</p>
<p>When we don't need the full set, but a preset mentions some fields from the
list, they are moved to the standard fields section as well.</p>
<h3 id="sorting-fields">Sorting Fields</h3>
<p>At this point, we have three lists of <code>PresetField</code> instances:
pre-filled <code>stdFields</code>, and empty <code>fields</code> and <code>moreFields</code>.
The <a href="https://github.com/Zverik/every_door/blob/v6.0/lib/screens/editor.dart#L191"><code>extractFields()</code></a>
method copies field instances from the preset to the latter two lists.</p>
<p>With two exceptions: first, the standard fields are obviously skipped.
Second, any fields from the <code>moreFields</code> are moved to <code>fields</code> if their
key is present on the object, or they have a matching
<a href="https://github.com/ideditor/schema-builder?tab=readme-ov-file#prerequisitetag">prerequisite</a>.</p>
<p>After this we have all three list prepared, and can re-render the editor page,
displaying them to the user.</p>
<h2 id="zooming-out">Zooming Out</h2>
<p>Every Door uses <a href="https://pub.dev/packages/flutter_map">flutter_map</a> library for its mapping.
Over the years it's been doing pretty complex things with it (but not "going native" complex).
This section is mostly about providers and components: what happens when you change modes
implicitly.</p>
<h3 id="map-controllers">Map Controllers</h3>
<p>Flutter map instances report their state and can be controller via <code>MapController</code> objects.
Note that when you use it for yourself, there are
<a href="https://docs.fleaflet.dev/usage/programmatic-interaction/external-custom-controllers">certain troubles</a>
you have to go through.</p>
<p>When you use the <a href="https://github.com/Zverik/every_door/blob/main/lib/widgets/map.dart"><code>CustomMap</code></a>
widget in Every Door code, for bi-directional conversation
you would pass the <code>CustomMapController</code>, which gets connected to the internal fields
of the widget. With it, you can:</p>
<ul>
<li>Access the <code>MapController</code> itself, so that you can access and affect the map state
    from outer listeners.</li>
<li>Access the <code>GlobalKey</code> for the <code>FlutterMap</code> widget. It is used once, for detecting
    its geometry on the screen.</li>
<li>Zoom the map to a list of locations. Useful for amenities and micromapping modes.</li>
</ul>
<p>In the <code>CustomMap</code> itself, there is a lengthy <code>MapEvent</code> listener. It only processes
user-initiated events, and does this:</p>
<ul>
<li>After moving the map, it updates the center location in <code>effectiveLocationProvider</code>.</li>
<li>After rotating, it updated the angle in <code>rotationProvider</code> (the value is commonly
    used for <code>initialRotation</code> property of the <code>FlutterMap</code> constructor).</li>
<li>During the map movement initiated by the user, it disables GPS tracking
    (in <code>trackingProvider</code>), and updates the zoom level in <code>zoomProvider</code>.</li>
</ul>
<p>And when the <code>switchToNavigate</code> flag is set, it also controls the navigation mode switch.</p>
<h3 id="modes-and-the-browser">Modes and the Browser</h3>
<h3 id="interactivity">Interactivity</h3>
<p><em>Decisions on zoom levels and interactivity</em></p>
<h2 id="uploading-to-openstreetmap">Uploading to OpenStreetMap</h2>
<p>This section traces what happens when a user taps the upload button, but does not explain
the entire uploading algorithm: it's a bit too complex. It would be useful to you to
understand how providers interact, and how the data is packaged.</p>
<p><em>This section will be completed later.</em></p>
<ol>
<li>Nav panel, upload button</li>
<li>Upload provider</li>
<li>Locking</li>
<li>Uploading OSM changes<ul>
<li>Splitting changes</li>
<li>Downloading data</li>
<li>Uploading data</li>
<li>Updating the inner storage</li>
</ul>
</li>
<li>Uploading notes</li>
<li>Uploading scribbles</li>
<li>Notification</li>
</ol>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/Zverik/every_door" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
      
    
    
    
      
      
    
    <a href="https://en.osm.town/@everydoor" target="_blank" rel="noopener me" title="en.osm.town" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M433 179.1c0-97.2-63.7-125.7-63.7-125.7-62.5-28.7-228.6-28.4-290.5 0 0 0-63.7 28.5-63.7 125.7 0 115.7-6.6 259.4 105.6 289.1 40.5 10.7 75.3 13 103.3 11.4 50.8-2.8 79.3-18.1 79.3-18.1l-1.7-36.9s-36.3 11.4-77.1 10.1c-40.4-1.4-83-4.4-89.6-54-.6-4.6-.9-9.3-.9-13.9 85.6 20.9 158.7 9.1 178.7 6.7 56.1-6.7 105-41.3 111.2-72.9 9.8-49.8 9-121.5 9-121.5zm-75.1 125.2h-46.6V190.1c0-49.7-64-51.6-64 6.9v62.5H201V197c0-58.5-64-56.6-64-6.9v114.2H90.3c0-122.1-5.2-147.9 18.4-175 25.9-28.9 79.8-30.8 103.8 6.1l11.6 19.5 11.6-19.5c24.1-37.1 78.1-34.8 103.8-6.1 23.7 27.3 18.4 53 18.4 175"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tracking", "navigation.tabs", "navigation.top", "navigation.expand", "navigation.indexes"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    
  </body>
</html>